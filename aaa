import json
def attck_number(power:str)->float:
    if power == "super effective":
        return 2
    if power == "normal effective":
        return 1
    if power == "not very effective":
        return 0.5
    if power == "no effect":
        return 0


fr = open("effectiveness.json", "r")
data = json.load(fr)
# print(data)
ack = {}
for effectivness in data:
    for attacker in data[effectivness]:
        if attacker in ack.keys():
            temp = ack[attacker]
        else:
            temp = {}
        for defender in data[effectivness][attacker]:
            temp[defender] = attck_number(effectivness)
        ack[attacker] = temp
print(ack["Dark"]["Dark"])


def attack(n1,n2,list):
    list = list.split(",")
    for i in list:
        utoc = []
        obrana = []
        for i in range(n1):
            utoc.append(list[i])
        for i in range(n2):
            obrana.append(list[n1+i])

    counter = 0

    for a in range(len(utoc)):
        prvy = 1
        druhy = 1
        if ' ' in utoc[a]:
            utocny = utoc[a].split()
            for z in range(len(obrana)):
                if " " in obrana[z]:
                    obranny = obrana[z].split()
                    for p in range(2):
                        prvy *= ack[utocny[0]][obranny[p]]
                        druhy *= ack[utocny[1]][obranny[p]]
                    counter += max(prvy, druhy)
                    prvy = 1
                    druhy = 1
                else:
                    prvy *= ack[utocny[0]][obrana[z]]
                    druhy *= ack[utocny[1]][obrana[z]]
                    counter += max(prvy, druhy)
                    prvy = 1
                    druhy = 1
        else:
            for z in range(len(obrana)):
                if " " in obrana[z]:
                    obranny = obrana[z].split()
                    counter += ack[utoc[a]][obranny[0]] * ack[utoc[a]][obranny[1]]
                else:
                    counter += ack[utoc[a]][obrana[z]]
    return counter


print(attack(2,6,"Psychic Dark,Fire,Ghost Ice,Fairy Electric,Normal Steel,Ghost,Poison Fire,Dark Bug"))
